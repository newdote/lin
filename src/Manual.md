# Argentin
## Part 1. Установка ОС
* Установлен дистрибутив
![Установлен дистрибутив](src/images/scr1.png)
* Проврека версии `cat /etc/issue`
![Проврека версии](./src/images/scr2.png)
## Part 2. Создание пользователя
* Создан пользователь quest2 `sudo adduser quest2`
![Создан пользователь quest2](./src/images/scr3.png)
* Назначены права пользователю quest2 `sudo usermod -aG adm quest2`
![Назначены права пользователю quest2](./src/images/scr4.png)
* Проверка на созданного пользователя quest2 `cat /etc/passwd`
![Проверка на созданного пользователя quest2](./src/images/scr5.png)
## Part 3. Настройка сети ОС
1. Узнать название машины `cat /etc/hostname`
![Узнать название машины](./src/images/scr6.png)
2. Установка временной зоны `sudo timedatectl set-timezone Europe/Moscow`
![Установка временной зоны](./src/images/scr7.png)
3. Вывод названия сетевых интерфейсов `ls /sys/class/net`
![Вывод названия сетевых интерфейсов](./src/images/scr8.png)
* Loopback - это термин, который обычно используется для описания методов или процедур маршрутизации электронных сигналов, цифровых потоков данных, или других движущихся сущностей от их источника и обратно к тому же источнику без специальной обработки или модификаций.
4. Получаем ip адрес устройства, от DHCP сервера `ip r`
![Получаем ip адрес устройства, от DHCP сервера](./src/images/scr9.png)
* DHCP - прикладной протокол, позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP.
5. Вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза `ip route | grep default`
![Вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза](./src/images/scr10.png)
6. Задаем статичные настройки ip, gw, dns, если требуется.
7. Перезагружаем виртуальную машину. Убеждаемся, что статичные сетевые настройки заданы см.п.4.
* Для провреки вводим `ping -c 5 ya.ru && ping -c 5 1.1.1.1`
![ping ya.ru ping 1.1.1.1](./src/images/scr11.png)
## Part 4. Обновление ОС
Обновление пакетов и системы до новой версии `sudo apt update && sudo apt full-upgrade && sudo do-release-upgrade`
![Обновление пакетов и системы до новой версии](./src/images/scr12.png)
## Part 5. Использование команды sudo
sudo — программа для системного администрирования UNIX-систем, позволяющая делегировать те или иные привилегированные ресурсы пользователям с ведением протокола работы. Основная идея — дать пользователям как можно меньше прав, при этом достаточных для решения поставленных задач.
* Разрешить пользователю sudo `sudo usermod -a -G sudo quest2`
![Разрешить пользователю sudo](./src/images/scr13.png)
* Проверить есть ли sudo права у quest2 `sudo -l -U quest2`
![Проверить есть ли sudo права у quest2](./src/images/scr14.png)
* Войти под пользователем quest2 `sh quest2`
![Войти под пользователем quest2](./src/images/scr15.png)
* Меняем название хоста `sudo hostname new`
![Меняем название хоста](./src/images/scr16.png)
## Part 6. Установка и настройка службы времени
* Вывести время, часового пояса `timedatectl`
![Вывести время, часового пояса](./src/images/scr17.png)
Если бы было отключено пислаи бы `timedatectl set-ntp true`
## Part 7. Установка и использование текстовых редакторов
* Устанавливаем MCEDIT `sudo apt install mc`
![Устанавливаем MCEDIT](./src/images/scr18.png)
* Создаем файл при помощи vim `vim test_vim.txt`
![Создаем файл при помощи vim](./src/images/scr19.png)
Пишем argentin, жмем `ESC`, пишем `:wq`
* Создаем файл при помощи nano `nano test_nano.txt`
![Создаем файл при помощи nano](./src/images/scr20.png)
Пишем argentin, жмем `control+x`, жмем `y`, `enter`
* Создаем файл при помощи MCEDIT `mcedit test_mcedit.txt`
![Создаем файл при помощи MCEDIT](./src/images/scr21.png)
Пишем argentin, жмем `fn+F2`, жмем `enter`, `fn+F10`
* Открываем файл при помощи vim `vim test_vim.txt`
![Открываем файл при помощи vim](./src/images/scr22.png)
Пишем `:%s/argentin/21 School 21/g`
* Открываем файл при помощи nano `nano test_nano.txt`
![Открываем файл при помощи nano](./src/images/scr23.png)
Жмем `Ctrl+\` пишем argentin, жмем `Enter` пишем 21 School 21, жмем `control+x`, жмем `y`, `enter`
* Открываем файл при помощи MCEDIT `mcedit test_mcedit.txt`
![Открываем файл при помощи MCEDIT](./src/images/scr24.png)
Жмем `fn+F4`, жмем `вниз`, пишем 21 School 21, жмем `enter`. жмем `fn+F2`, жмем `enter`, `fn+F10`
* Для поиска при помощи vim открываем файл и пишем `/` после текст для поиска
* Для поиска при помощи nano открываем файл и жмем `control + W` после текст для поиска
* Для поиска при помощи mcedit открываем файл и пишем `fn + F7` после текст для поиска
## Part 8. Установка и базовая настройка сервиса SSHD
* Установить службу SSHd `sudo apt install openssh-server`
![Установить службу SSHd](./src/images/scr25.png)
* Автозагрузка `sudo systemctl enable sshd`
* Для изменения порта на 2022 требуется отредактировать файл nano /etc/ssh/sshd_config Найти и заменить `#Port 22` на `Port 2022`
* Для применения изменений `/etc/init.d/ssh restart`
sshd это демон, который ожидает соединения от клиентов. Обычно он запускается при загрузке системы из /etc/rc. Он создает нового демона для каждого нового соединения. Ответвленный демон обрабатывает обмен ключами, шифрование, аутентификацию, выполнение команд и обмен данными. Эта реализация sshd поддерживает обе версии протокола SSH, 1 и 2, одновременно. sshd работает следующим образом.
* Проверка наличия процесса sshd `ps -ef | grep sshd`
![Проверка наличия процесса sshd](./src/images/scr26.png)
Столбцы, возвращенные ps представляют некоторую ключевую информацию.
*Устанавливаем и запускаем `sudp apt install net-tools`, далее `netstat -tan`
![Устанавливаем и запускаем netstat](./src/images/scr27.png)
- a - показывать состояние всех сокетов. Обычно сокеты, используемые серверными процессами, не показываются.
- t - просмотр только tcp соединений
- n - показывать сетевые адреса как числа. netstat обычно показывает адреса как символы. Эту опцию можно использовать с любым форматом показа.
## Part 9. Установка и использование утилит top, htop
* Для установки пишем `sudo apt install htop`
* Запускаем `top`
![Запускаем top](./src/images/scr28.png)
* Запускаем `htop`
![Запускаем htop](./src/images/scr29.png)
## Part 10. Использование утилиты fdisk
* Для запуска утилиты fdisk пишем `sudo fdisk -l`
![Запускаем fdisk](./src/images/scr30.png)
fdisk — общее название системных утилит для управления разделами жёсткого диска. Широко распространены и имеются практически в любой операционной системе, но работают по-разному. Используют текстовый интерфейс пользователя.
* Из вывода мы видим, что название `ubuntu--vg-ubuntu--lv`, `10 GiB`, `20971520` секторов, размер swap `2011132`
## Part 11. Использование утилиты df
* Для запуска утилиты df пишем `df`
![Для запуска утилиты df](./src/images/scr32.png)
df (аббревиатура от disk free) — утилита в UNIX и UNIX-подобных системах, показывает список всех файловых систем по именам устройств, сообщает их размер, занятое и свободное пространство и точки монтирования.
* Для запуска утилиты df -Th корневого раздела пишем `df -Th`
![Для запуска утилиты df Th](./src/images/scr31.png)
- T - Выдавать тип для каждой файловой системы. Тип берётся от операционной системы (и определяется системно-зависимым способом, например посредством чтения файла /etc/mtab).
- h - Отобразит размер в человеко-читаемом формате, размерностью 1024, добавив названия единиц (Kибибайт, Mебибайт, Гибибайт, Tебибайт).
## Part 12. Использование утилиты du
* Для запуска du нужно ввести `du`
![du нужно ввести](./src/images/scr33.png)
* Вывести размер папок /home, /var, /var/log `sudo du -s /home && sudo du -s /var && sudo du -s /var/log`
![Вывести размер папок](./src/images/scr34.png)
* Вывести размер всего содержимого в /var/log `du -a /var/log`
![Вывести размер всего содержимого var log](./src/images/scr35.png)
## Part 13. Установка и использование утилиты ncdu
* Для установки ncdu пишем `sudo apt install ncdu`
![Для установки ncdu](./src/images/scr36.png)

* Для запуска ncdu нужно ввести `ncdu`
![du нужно ввести](./src/images/scr37.png)
* Вывести размер папки /home
`sudo ncdu /home`
![размер папки /home](./src/images/scr38.png)
* Вывести размер папки /var
`sudo ncdu /var`
![размер папки /home](./src/images/scr39.png)
* Вывести размер папки и содержимого /var/log
`sudo ncdu /var/log`
![размер папки /home](./src/images/scr40.png)
## Part 14. Работа с системными журналами
* Время последней успешной авторизации, имя пользователя и метод входа в систему
![Время последней](./src/images/scr41.png)
* Перезапустить службу SSHd и показать логи
![Служба SSHd](./src/images/scr42.png)
## Part 15. Использование планировщика заданий CRON
* Установка cron `sudo apt install cron`
* Работа в фоновом режиме `sudo systemctl enable cron`
![Работа в фоновом режиме](./src/images/scr43.png)
* Для редактирования `crontab -e`, далее выбрать редактор
![Для редактирования crontab](./src/images/scr44.png)
Назначаем команду для запуска каждые 2 минуты `*/2 * * * * uptime`
![Назначаем команду](./src/images/scr45.png)
Проверяем текущие задачи cron `crontab -l`
![Проверяем текущие задачи](./src/images/scr46.png)
Для удаления задач cron пишем `crontab -r`
![Для удаления задач cron](./src/images/scr47.png)

Готово!
